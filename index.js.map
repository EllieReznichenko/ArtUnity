{"version":3,"file":"index.js","sources":["../src/js/feedback.js"],"sourcesContent":["import axios from 'axios';\n\nimport Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nimport 'css-star-rating/css/star-rating.min.css';\n\n// Округлення\nfunction roundRating(rating) {\n  return Math.round(rating);\n}\n\n// Обробка відгуків\nfunction processFeedbacks(rawFeedbacks) {\n  return rawFeedbacks.map(fb => ({\n    ...fb,\n    roundedRating: roundRating(fb.rating),\n  }));\n}\n\n// Отримання випадкових відгуків (на фронті, бо бек не підтримує limit/sort)\nexport const getRandomFeedbacks = async (count = 3) => {\n  try {\n    const response = await axios.get(\n      'https://sound-wave.b.goit.study/api/feedbacks'\n    );\n    const all = response.data.data;\n\n    const random = [];\n    const used = new Set();\n\n    while (random.length < count && used.size < all.length) {\n      const i = Math.floor(Math.random() * all.length);\n      if (!used.has(i)) {\n        used.add(i);\n        random.push(all[i]);\n      }\n    }\n\n    return random;\n  } catch (error) {\n    console.error('Не вдалося отримати відгуки:', error);\n    return [];\n  }\n};\n\n// Налаштування Swiper\ndocument.addEventListener('DOMContentLoaded', () => {\n  new Swiper('.swiper', {\n    direction: 'horizontal',\n    loop: false,\n    modules: [Navigation, Pagination],\n    pagination: {\n      el: '.swiper-pagination',\n      clickable: true,\n    },\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev',\n    },\n    scrollbar: {\n      el: '.swiper-scrollbar',\n    },\n    simulateTouch: true,\n    grabCursor: true,\n    keyboard: {\n      enabled: true,\n      pageUpDown: true,\n      onlyInViewport: true,\n    },\n    mousewheel: {\n      eventsTarget: '.swiper',\n    },\n  });\n});\n\n// Генерація слайдів з даних\n(async () => {\n  try {\n    const rawFeedbacks = await getRandomFeedbacks(3);\n    console.log('RAW:', rawFeedbacks);\n    const feedbacks = processFeedbacks(rawFeedbacks);\n\n    const wrapper = document.querySelector('.swiper-wrapper');\n    wrapper.innerHTML = '';\n    feedbacks.forEach(fb => {\n      const { name, descr, rating } = fb;\n\n      const slide = document.createElement('div');\n      slide.className = 'swiper-slide';\n      slide.innerHTML = `\n          <div class=\"feedback-card\">\n            <div class=\"rating large star-icon direction-rtl value-${rating} half label-hidden\">\n   <div class=\"label-value\">1.5</div>\n    <div class=\"star-container\">\n        <div class=\"star\">\n            <i class=\"star-empty\"></i>\n            <i class=\"star-half\"></i>\n            <i class=\"star-filled\"></i>\n        </div>\n        <div class=\"star\">\n            <i class=\"star-empty\"></i>\n            <i class=\"star-half\"></i>\n            <i class=\"star-filled\"></i>\n        </div>\n        <div class=\"star\">\n            <i class=\"star-empty\"></i>\n            <i class=\"star-half\"></i>\n            <i class=\"star-filled\"></i>\n        </div>\n        <div class=\"star\">\n            <i class=\"star-empty\"></i>\n            <i class=\"star-half\"></i>\n            <i class=\"star-filled\"></i>\n        </div>\n        <div class=\"star\">\n            <i class=\"star-empty\"></i>\n            <i class=\"star-half\"></i>\n            <i class=\"star-filled\"></i>\n        </div>\n    </div>\n</div>\n            <p>${descr}</p>\n            <h3>${name}</h3>\n          </div>\n        `;\n      wrapper.appendChild(slide);\n    });\n  } catch (error) {\n    console.error('Помилка під час обробки відгуків:', error);\n  }\n})();\n"],"names":["roundRating","rating","processFeedbacks","rawFeedbacks","fb","getRandomFeedbacks","count","all","axios","random","used","i","error","Swiper","Navigation","Pagination","feedbacks","wrapper","name","descr","slide"],"mappings":"2wBAWA,SAASA,EAAYC,EAAQ,CAC3B,OAAO,KAAK,MAAMA,CAAM,CAC1B,CAGA,SAASC,EAAiBC,EAAc,CACtC,OAAOA,EAAa,IAAIC,IAAO,CAC7B,GAAGA,EACH,cAAeJ,EAAYI,EAAG,MAAM,CACrC,EAAC,CACJ,CAGO,MAAMC,EAAqB,MAAOC,EAAQ,IAAM,CACrD,GAAI,CAIF,MAAMC,GAHW,MAAMC,EAAM,IAC3B,+CACN,GACyB,KAAK,KAEpBC,EAAS,CAAA,EACTC,EAAO,IAAI,IAEjB,KAAOD,EAAO,OAASH,GAASI,EAAK,KAAOH,EAAI,QAAQ,CACtD,MAAMI,EAAI,KAAK,MAAM,KAAK,SAAWJ,EAAI,MAAM,EAC1CG,EAAK,IAAIC,CAAC,IACbD,EAAK,IAAIC,CAAC,EACVF,EAAO,KAAKF,EAAII,CAAC,CAAC,EAErB,CAED,OAAOF,CACR,OAAQG,EAAO,CACd,eAAQ,MAAM,+BAAgCA,CAAK,EAC5C,EACR,CACH,EAGA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,IAAIC,EAAO,UAAW,CACpB,UAAW,aACX,KAAM,GACN,QAAS,CAACC,EAAYC,CAAU,EAChC,WAAY,CACV,GAAI,qBACJ,UAAW,EACZ,EACD,WAAY,CACV,OAAQ,sBACR,OAAQ,qBACT,EACD,UAAW,CACT,GAAI,mBACL,EACD,cAAe,GACf,WAAY,GACZ,SAAU,CACR,QAAS,GACT,WAAY,GACZ,eAAgB,EACjB,EACD,WAAY,CACV,aAAc,SACf,CACL,CAAG,CACH,CAAC,GAGA,SAAY,CACX,GAAI,CACF,MAAMZ,EAAe,MAAME,EAAmB,CAAC,EAC/C,QAAQ,IAAI,OAAQF,CAAY,EAChC,MAAMa,EAAYd,EAAiBC,CAAY,EAEzCc,EAAU,SAAS,cAAc,iBAAiB,EACxDA,EAAQ,UAAY,GACpBD,EAAU,QAAQZ,GAAM,CACtB,KAAM,CAAE,KAAAc,EAAM,MAAAC,EAAO,OAAAlB,CAAM,EAAKG,EAE1BgB,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,eAClBA,EAAM,UAAY;AAAA;AAAA,qEAE6CnB,CAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBA8B1DkB,CAAK;AAAA,kBACJD,CAAI;AAAA;AAAA,UAGhBD,EAAQ,YAAYG,CAAK,CAC/B,CAAK,CACF,OAAQR,EAAO,CACd,QAAQ,MAAM,oCAAqCA,CAAK,CACzD,CACH,GAAI"}